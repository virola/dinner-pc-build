var z=(a,t,r)=>new Promise((s,i)=>{var c=u=>{try{f(r.next(u))}catch(m){i(m)}},F=u=>{try{f(r.throw(u))}catch(m){i(m)}},f=u=>u.done?s(u.value):Promise.resolve(u.value).then(c,F);f((r=r.apply(a,t)).next())});import{n as l,r as A,a as H,F as D,I as G,c as W,b as J,s as Q,v as b,w as X,f as Y,k as e,o as w,h as L,x as B,y as E,z as o,C as Z,B as p,t as v,l as C,D as x,j as M,E as K,q as ee,G as te,H as re,J as le}from"./index.919817c1.js";import{u as ae,a as se,L as O,_ as ne,b as oe}from"./LoginFormTitle.71cdb62d.js";import{G as ie,W as ce,A as ue}from"./WechatFilled.0eeaf681.js";import{C as de,R as fe}from"./index.9ef0f9ba.js";var me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm167 633.6C638.4 735 583 757 516.9 757c-95.7 0-178.5-54.9-218.8-134.9C281.5 589 272 551.6 272 512s9.5-77 26.1-110.1c40.3-80.1 123.1-135 218.8-135 66 0 121.4 24.3 163.9 63.8L610.6 401c-25.4-24.3-57.7-36.6-93.6-36.6-63.8 0-117.8 43.1-137.1 101-4.9 14.7-7.7 30.4-7.7 46.6s2.8 31.9 7.7 46.6c19.3 57.9 73.3 101 137 101 33 0 61-8.7 82.9-23.4 26-17.4 43.2-43.3 48.9-74H516.9v-94.8h230.7c2.9 16.1 4.4 32.8 4.4 50.1 0 74.7-26.7 137.4-73 180.1z"}}]},name:"google-circle",theme:"filled"},ge=me;function N(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),s.forEach(function(i){pe(a,i,r[i])})}return a}function pe(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var _=function(t,r){var s=N({},t,r.attrs);return l(A,N({},s,{icon:ge}),null)};_.displayName="GoogleCircleFilled";_.inheritAttrs=!1;var ve=_,ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm215.3 337.7c.3 4.7.3 9.6.3 14.4 0 146.8-111.8 315.9-316.1 315.9-63 0-121.4-18.3-170.6-49.8 9 1 17.6 1.4 26.8 1.4 52 0 99.8-17.6 137.9-47.4-48.8-1-89.8-33-103.8-77 17.1 2.5 32.5 2.5 50.1-2a111 111 0 01-88.9-109v-1.4c14.7 8.3 32 13.4 50.1 14.1a111.13 111.13 0 01-49.5-92.4c0-20.7 5.4-39.6 15.1-56a315.28 315.28 0 00229 116.1C492 353.1 548.4 292 616.2 292c32 0 60.8 13.4 81.1 35 25.1-4.7 49.1-14.1 70.5-26.7-8.3 25.7-25.7 47.4-48.8 61.1 22.4-2.4 44-8.6 64-17.3-15.1 22.2-34 41.9-55.7 57.6z"}}]},name:"twitter-circle",theme:"filled"},be=ye;function R(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),s.forEach(function(i){we(a,i,r[i])})}return a}function we(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var k=function(t,r){var s=R({},t,r.attrs);return l(A,R({},s,{icon:be}),null)};k.displayName="TwitterCircleFilled";k.inheritAttrs=!1;var Ce=k;const _e=H({__name:"LoginForm",setup(a){const t=de,r=fe,s=D.Item,i=G.Password,{t:c}=W(),{notification:F,createErrorModal:f}=le(),{prefixCls:u}=J("login"),m=Q(),{setLoginState:I,getLoginState:U}=ae(),{getFormRules:V}=se(),$=b(),h=b(!1),P=b(!1),S=b(!1),g=X({account:"admin",password:"admin123"}),{validForm:q}=oe($),T=Y(()=>e(U)===O.LOGIN);function j(){return z(this,null,function*(){const y=yield q();if(!!y)try{h.value=!0;const n=yield m.login({password:y.password,username:y.account,mode:"none"});n&&F.success({message:c("sys.login.loginSuccessTitle"),description:`${c("sys.login.loginSuccessDesc")}: ${n.nickName}`,duration:3})}catch(n){f({title:c("sys.api.errorTip"),content:n.message||c("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${u}`)||document.body})}finally{h.value=!1}})}return(y,n)=>(w(),L(re,null,[B(l(ne,{class:"enter-x"},null,512),[[E,e(T)]]),B(l(e(D),{class:"p-4 enter-x",model:g,rules:e(V),ref_key:"formRef",ref:$,onKeypress:te(j,["enter"])},{default:o(()=>[l(e(s),{name:"account",class:"enter-x"},{default:o(()=>[l(e(G),{size:"large",value:g.account,"onUpdate:value":n[0]||(n[0]=d=>g.account=d),placeholder:e(c)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),l(e(s),{name:"password",class:"enter-x"},{default:o(()=>[l(e(i),{size:"large",visibilityToggle:"",value:g.password,"onUpdate:value":n[1]||(n[1]=d=>g.password=d),placeholder:e(c)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),l(e(r),{class:"enter-x"},{default:o(()=>[l(e(t),{span:12},{default:o(()=>[l(e(s),null,{default:o(()=>[l(e(Z),{checked:P.value,"onUpdate:checked":n[2]||(n[2]=d=>P.value=d),size:"small"},{default:o(()=>[p(v(e(c)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),C("",!0)]),_:1}),l(e(s),{class:"enter-x"},{default:o(()=>[l(e(x),{type:"primary",size:"large",block:"",onClick:j,loading:h.value},{default:o(()=>[p(v(e(c)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),S.value?(w(),M(e(r),{key:0,class:"enter-x",gutter:20},{default:o(()=>[l(e(t),{md:12,xs:24},{default:o(()=>[l(e(x),{block:"",onClick:n[4]||(n[4]=d=>e(I)(e(O).MOBILE))},{default:o(()=>[p(v(e(c)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),l(e(t),{md:12,xs:24},{default:o(()=>[l(e(x),{block:"",onClick:n[5]||(n[5]=d=>e(I)(e(O).QR_CODE))},{default:o(()=>[p(v(e(c)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1})]),_:1})):C("",!0),S.value?(w(),M(e(K),{key:1,class:"enter-x"},{default:o(()=>[p(v(e(c)("sys.login.otherSignIn")),1)]),_:1})):C("",!0),S.value?(w(),L("div",{key:2,class:ee(["flex justify-evenly enter-x",`${e(u)}-sign-in-way`])},[l(e(ie)),l(e(ce)),l(e(ue)),l(e(ve)),l(e(Ce))],2)):C("",!0)]),_:1},8,["model","rules","onKeypress"]),[[E,e(T)]])],64))}});export{_e as default};
