var I=Object.defineProperty;var d=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var f=(e,o,u)=>o in e?I(e,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[o]=u,F=(e,o)=>{for(var u in o||(o={}))E.call(o,u)&&f(e,u,o[u]);if(d)for(var u of d(o))P.call(o,u)&&f(e,u,o[u]);return e};var m=(e,o,u)=>new Promise((r,n)=>{var p=t=>{try{a(u.next(t))}catch(l){n(l)}},i=t=>{try{a(u.throw(t))}catch(l){n(l)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(p,i);a((u=u.apply(e,o)).next())});import{B as T}from"./BasicForm.99673a00.js";import{u as y}from"./useForm.140b2a6b.js";import{bf as b,at as S,a as _,v as R,f as M,k as w,V as N,eM as k,X as h,o as x,j as V,z as A,n as G,Y as $}from"./index.051b8e6d.js";import{T as q}from"./index.9cd125ba.js";import{B as L,a as O}from"./index.74f5002c.js";import{h as j}from"./system.24880ab0.js";const oe=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"menuName",width:200,align:"left"},{title:"\u56FE\u6807",dataIndex:"icon",width:50,customRender:({record:e})=>b(S,{icon:e.icon})},{title:"\u6743\u9650\u6807\u8BC6",dataIndex:"perms",width:180},{title:"\u7EC4\u4EF6",dataIndex:"component"},{title:"\u6392\u5E8F",dataIndex:"orderNum",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const u=~~e.status===0,r=u?"green":"red",n=u?"\u542F\u7528":"\u505C\u7528";return b(q,{color:r},()=>n)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180}],z=e=>e==="C",B=e=>e==="M",c=e=>e==="F",te=[{field:"menuName",label:"\u83DC\u5355\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],U=[{field:"menuType",label:"\u83DC\u5355\u7C7B\u578B",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u76EE\u5F55",value:"C"},{label:"\u83DC\u5355",value:"M"},{label:"\u6309\u94AE",value:"F"}]},colProps:{lg:24,md:24}},{field:"menuName",label:"\u83DC\u5355\u540D\u79F0",component:"Input",required:!0},{field:"parentId",label:"\u4E0A\u7EA7\u83DC\u5355",component:"TreeSelect",componentProps:{fieldNames:{label:"menuName",key:"menuId",value:"menuId"},getPopupContainer:()=>document.body}},{field:"orderNum",label:"\u6392\u5E8F",component:"InputNumber",required:!0},{field:"icon",label:"\u56FE\u6807",component:"IconPicker",required:!0,ifShow:({values:e})=>!c(e.menuType)},{field:"path",label:"\u8DEF\u7531\u5730\u5740",component:"Input",required:!0,ifShow:({values:e})=>!c(e.menuType)},{field:"component",label:"\u7EC4\u4EF6\u8DEF\u5F84",component:"Input",ifShow:({values:e})=>B(e.menuType)},{field:"perms",label:"\u6743\u9650\u6807\u8BC6",component:"Input",ifShow:({values:e})=>!z(e.menuType)},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u7981\u7528",value:"1"}]}},{field:"isExt",label:"\u662F\u5426\u5916\u94FE",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u5426",value:"0"},{label:"\u662F",value:"1"}]},ifShow:({values:e})=>!c(e.menuType)},{field:"keepalive",label:"\u662F\u5426\u7F13\u5B58",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u5426",value:"0"},{label:"\u662F",value:"1"}]},ifShow:({values:e})=>B(e.menuType)},{field:"show",label:"\u662F\u5426\u663E\u793A",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u662F",value:"0"},{label:"\u5426",value:"1"}]},ifShow:({values:e})=>!c(e.menuType)}],W=_({name:"MenuDrawer",components:{BasicDrawer:L,BasicForm:T},emits:["success","register"],setup(e,{emit:o}){const u=R(!0),[r,{resetFields:n,setFieldsValue:p,updateSchema:i,validate:a}]=y({labelWidth:100,schemas:U,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[t,{setDrawerProps:l,closeDrawer:D}]=O(s=>m(this,null,function*(){n(),l({confirmLoading:!1}),u.value=!!(s!=null&&s.isUpdate),w(u)&&p(F({},s.record));const C=k(yield j(),{id:"menuId",pid:"parentId"});i({field:"parentId",componentProps:{treeData:C}})})),g=M(()=>w(u)?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355");function v(){return m(this,null,function*(){try{const s=yield a();l({confirmLoading:!0}),D(),o("success")}finally{l({confirmLoading:!1})}})}return{registerDrawer:t,registerForm:r,getTitle:g,handleSubmit:v}}});function X(e,o,u,r,n,p){const i=h("BasicForm"),a=h("BasicDrawer");return x(),V(a,$(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:A(()=>[G(i,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Y=N(W,[["render",X]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{Y as M,ne as a,oe as c,te as s};
