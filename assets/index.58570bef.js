var M=(o,C,r)=>new Promise((l,f)=>{var D=i=>{try{d(r.next(i))}catch(_){f(_)}},g=i=>{try{d(r.throw(i))}catch(_){f(_)}},d=i=>i.done?l(i.value):Promise.resolve(i.value).then(D,g);d((r=r.apply(o,C)).next())});import{V as x,a as z,C as J,v as P,c8 as L,X as s,bd as H,x as q,o as h,j as w,z as a,i as p,n,h as T,$ as U,Y as X,H as V,t as Y,l as Q,y as Z,dC as I,eL as ee,B as K,J as ue}from"./index.051b8e6d.js";import{T as W}from"./index.551cb3a8.js";import{P as oe}from"./index.2b14c180.js";import{B as te}from"./BasicForm.99673a00.js";import{u as ne}from"./useForm.140b2a6b.js";import{D as se}from"./DeleteOutlined.37a665c8.js";import{R as ae,C as le}from"./index.3ddd1a12.js";import"./useRefs.30331c8d.js";import"./PlusOutlined.3505bae4.js";import"./index.c4040988.js";import"./index.900b54f5.js";import"./eagerComputed.2b892fda.js";import"./useWindowSizeFn.dbf4cc23.js";import"./useContentViewHeight.acab2293.js";import"./ArrowLeftOutlined.339bcb08.js";import"./index.47f7791d.js";import"./transButton.64b42905.js";import"./index.3ec80e2e.js";import"./index.9cd125ba.js";import"./index.91f19117.js";import"./index.d091d485.js";import"./index.0a3ccb18.js";import"./index.f9c0747d.js";import"./index.1226963b.js";import"./index.2268f048.js";import"./FullscreenOutlined.6ce9a280.js";import"./index.869b6f14.js";import"./index.29220c51.js";import"./index.3ee0c50a.js";import"./index.66663891.js";import"./uuid.2b29000c.js";import"./download.a6ed5dfa.js";import"./base64Conver.08b9f4ec.js";import"./index.f028e9a2.js";import"./uniqBy.6301f91d.js";const G="\u5B66\u751F\u98DF\u8C31",j=[{label:"\u5B66\u751F",value:"\u5B66\u751F"},{label:"\u6559\u804C\u5DE5",value:"\u6559\u804C\u5DE5"}],O=["\u65E9\u9910","\u65E9\u70B9","\u5348\u9910","\u5348\u70B9","\u665A\u9910","\u591C\u5BB5"],ie=["\u591A\u4E2A\u5957\u9910","\u5355\u4E00\u5957\u9910","\u81EA\u7531\u70B9\u9910"],re={showActionButtonGroup:!1,labelWidth:140},ce=[];function pe(o){return[{field:"name",label:"\u914D\u7F6E\u540D\u79F0",component:"Input",required:!0,helpMessage:"\u4E3A\u60A8\u7684\u914D\u7F6E\u547D\u540D\uFF0C\u4F8B\u5982\u201C\u5E7C\u513F\u56ED\u914D\u7F6E\u201D\uFF0C\u201C\u5C0F\u5B66\u4F4E\u5E74\u7EA7\u914D\u7F6E\u201D",colProps:{span:24},defaultValue:G,componentProps:()=>({placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0",onChange:r=>{o(r.target.value)}})},{field:"f2",label:"\u7528\u9910\u4EBA\u7FA4",component:"Select",required:!0,helpMessage:"\u82E5\u8001\u5E08\u4E0E\u5B66\u751F\u4E00\u540C\u7528\u9910\uFF0C\u53EF\u52FE\u9009\u201C\u5E08\u751F\u540C\u9910\u201D",colProps:{span:12},componentProps:{options:j}},{field:"f3",label:"\u5E08\u751F\u540C\u9910",component:"Checkbox",defaultValue:!1,colProps:{span:12}},{field:"f4",label:"\u98DF\u8C31\u7C7B\u578B",component:"RadioGroup",required:!0,colProps:{span:12},componentProps:{options:[{label:"\u7B80\u6613\u98DF\u8C31",value:"\u7B80\u6613\u98DF\u8C31"},{label:"\u5E26\u91CF\u98DF\u8C31",value:"\u5E26\u91CF\u98DF\u8C31"}]}},{field:"f5",label:"\u98DF\u8C31\u5468\u671F",component:"RadioGroup",required:!0,colProps:{span:12},componentProps:{options:[{label:"\u5468\u65E5\u81F3\u6B21\u5468\u516D",value:"\u5468\u65E5\u81F3\u6B21\u5468\u516D"},{label:"\u5468\u4E00\u81F3\u5468\u65E5",value:"\u5468\u4E00\u81F3\u5468\u65E5"}]}},{field:"f6",label:"\u9009\u62E9\u9910\u522B",component:"CheckboxGroup",colProps:{span:24},componentProps:{options:O},slot:"checkAll"},...ce]}const de=z({name:"RecipeConfig",components:{Tabs:W,TabPane:W.TabPane,PageWrapper:oe,BasicForm:te,CheckboxGroup:J.Group,Row:ae,Col:le,DeleteOutlined:se},setup(){const{createMessage:o}=ue(),C=P("tabs1"),r=P(!1),l=P([]),f=P([]),D={value:""};g(1);function g(e){const u=`tabs${e}`,t=pe(c=>d(c,u));f.value[l.value.length]=O.map(c=>({userCount:"",type:"",inputs:[{value:""}],show:!1})),l.value.push({key:u,tab:G,forceRender:!0,Form:ne(Object.assign({schemas:t},re))})}function d(e,u){const t=l.value.findIndex(c=>c.key==u);t>-1&&(l.value[t].tab=e||G)}function i(){return M(this,null,function*(){let e="";r.value=!0;try{const u=[];for(const t of l.value){e=t.key;const{validate:c,getFieldsValue:E}=t.Form[1];yield c(),u.push(E())}o.success("\u63D0\u4EA4\u6210\u529F\uFF01\u8BF7\u6253\u5F00\u63A7\u5236\u53F0\u67E5\u770B"),o.success(JSON.stringify(u))}catch(u){C.value=e}finally{r.value=!1}})}function _(e,u){u==="add"?g(Date.now()):I.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",icon:n(ee),content:n("div",{style:"color:red;"},"\u786E\u5B9A\u5220\u9664\u8BE5\u914D\u7F6E\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),onOk(){S(e)},onCancel(){}})}function S(e=""){if(!e)return!1;const u=l.value.findIndex(t=>t.key==e);u>-1&&l.value.splice(u,1)}function k(e,u){f.value[u][e].inputs.push(D)}function R(e,u,t){f.value[t][u].inputs.splice(e,1)}function $(e,u,t,c){e[u]=t.componentProps.options,A(c)}function A(e){const{getFieldsValue:u}=l.value[e].Form[1],t=u();f.value[e].forEach((E,b)=>{t.f6,t.f6.indexOf(O[b])>-1?E.show=!0:E.show=!1})}return{omit:L,loading:r,activeKey:C,tabsFormSchema:l,handleSubmit:i,peopleOptions:j,onEdit:_,addInput:k,delInput:R,dinerTypes:O,dishTypeOptions:ie.map(e=>({label:e,value:e})),dishConfigForm:f,handleCheckboxChange:A,handleCheckAll:$}}}),me={class:"px-4"},Fe=K("\u5168\u9009"),fe={class:"pb-4"},Ce={class:"border-1 border-gray-300 rounded p-4"},ve={class:"flex items-center justify-between"},he={class:"mr-4 font-bold"},_e=K("+ \u6DFB\u52A0\u5957\u9910"),Ee={class:"mb-4 flex items-center"},be=p("span",{class:"w-30"},"\u7528\u9910\u4EBA\u6570\uFF1A",-1),Be={class:"mb-4 flex items-center"},ge=p("span",{class:"w-30"},"\u4F9B\u9910\u7C7B\u578B\uFF1A",-1),ye=p("span",{class:"w-30"},"\u5957\u9910\u540D\u79F0\uFF1A",-1),De={class:"p-2"},ke=K("\u63D0\u4EA4");function Ae(o,C,r,l,f,D){const g=s("CheckboxGroup"),d=s("a-button"),i=s("a-space"),_=s("BasicForm"),S=s("a-divider"),k=s("a-input"),R=s("a-select"),$=s("DeleteOutlined"),A=s("Col"),e=s("Row"),u=s("TabPane"),t=s("Tabs"),c=s("PageWrapper"),E=H("loading");return q((h(),w(c,null,{rightFooter:a(()=>[p("div",De,[n(d,{type:"primary",onClick:o.handleSubmit},{default:a(()=>[ke]),_:1},8,["onClick"])])]),default:a(()=>[n(t,{class:"bg-white",activeKey:o.activeKey,"onUpdate:activeKey":C[0]||(C[0]=b=>o.activeKey=b),type:"editable-card",onEdit:o.onEdit},{default:a(()=>[(h(!0),T(V,null,U(o.tabsFormSchema,(b,y)=>(h(),w(u,X({key:b.key,closable:!0},o.omit(b,["Form","key"])),{default:a(()=>[p("div",me,[n(_,{onRegister:b.Form[0]},{checkAll:a(({model:m,field:v,schema:F})=>[n(i,null,{default:a(()=>[n(g,{value:m[v],"onUpdate:value":B=>m[v]=B,options:F.componentProps.options,onChange:B=>o.handleCheckboxChange(y)},null,8,["value","onUpdate:value","options","onChange"]),n(d,{size:"small",type:"primary",onClick:B=>o.handleCheckAll(m,v,F,y)},{default:a(()=>[Fe]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onRegister"]),p("div",fe,[n(e,{gutter:[16,16]},{default:a(()=>[(h(!0),T(V,null,U(o.dishConfigForm[y],(m,v)=>q((h(),w(A,{span:8,key:v},{default:a(()=>[p("div",Ce,[p("div",ve,[p("div",he,Y(o.dinerTypes[v]),1),n(d,{onClick:F=>o.addInput(v,y)},{default:a(()=>[_e]),_:2},1032,["onClick"])]),n(S,{class:"!my-4"}),p("div",Ee,[be,n(k,{value:m.userCount,"onUpdate:value":F=>m.userCount=F,placeholder:"\u8BF7\u8F93\u5165\u4EBA\u6570"},null,8,["value","onUpdate:value"])]),p("div",Be,[ge,n(R,{class:"w-full",value:m.type,"onUpdate:value":F=>m.type=F,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",options:o.dishTypeOptions},null,8,["value","onUpdate:value","options"])]),(h(!0),T(V,null,U(m.inputs,(F,B)=>(h(),T("div",{class:"mb-4 flex items-center",key:B},[ye,n(i,{class:"w-full"},{default:a(()=>[n(k,{value:F.value,"onUpdate:value":N=>F.value=N},null,8,["value","onUpdate:value"]),B>0?(h(),w(d,{key:0,onClick:N=>o.delInput(B,v,y)},{default:a(()=>[n($)]),_:2},1032,["onClick"])):Q("",!0)]),_:2},1024)]))),128))])]),_:2},1024)),[[Z,m.show]])),128))]),_:2},1024)])])]),_:2},1040))),128))]),_:1},8,["activeKey","onEdit"])]),_:1})),[[E,o.loading]])}var cu=x(de,[["render",Ae]]);export{cu as default};
